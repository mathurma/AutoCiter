<!DOCTYPE article PUBLIC "-//NLM//DTD JATS (Z39.96) Journal Publishing DTD v1.1d3 20150301//EN" "http://jats.nlm.nih.gov/publishing/1.1d3/JATS-journalpublishing1.dtd">
<article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" article-type="other" dtd-version="1.1d3" xml:lang="en">
<front>
<journal-meta>
<journal-id journal-id-type="nlm-ta">PLoS Biol</journal-id>
<journal-id journal-id-type="publisher-id">plos</journal-id>
<journal-id journal-id-type="pmc">plosbiol</journal-id>
<journal-title-group>
<journal-title>PLOS Biology</journal-title>
</journal-title-group>
<issn pub-type="ppub">1544-9173</issn>
<issn pub-type="epub">1545-7885</issn>
<publisher>
<publisher-name>Public Library of Science</publisher-name>
<publisher-loc>San Francisco, CA USA</publisher-loc>
</publisher>
</journal-meta>
<article-meta>
<article-id pub-id-type="doi">10.1371/journal.pbio.2001624</article-id>
<article-id pub-id-type="publisher-id">pbio.2001624</article-id>
<article-categories>
<subj-group subj-group-type="heading">
<subject>Community Page</subject>
</subj-group>
<subj-group subj-group-type="Discipline-v3"><subject>Biology and life sciences</subject><subj-group><subject>Molecular biology</subject><subj-group><subject>Molecular biology techniques</subject><subj-group><subject>Molecular biology assays and analysis techniques</subject><subj-group><subject>Phylogenetic analysis</subject></subj-group></subj-group></subj-group></subj-group></subj-group><subj-group subj-group-type="Discipline-v3"><subject>Research and analysis methods</subject><subj-group><subject>Molecular biology techniques</subject><subj-group><subject>Molecular biology assays and analysis techniques</subject><subj-group><subject>Phylogenetic analysis</subject></subj-group></subj-group></subj-group></subj-group><subj-group subj-group-type="Discipline-v3"><subject>Biology and life sciences</subject><subj-group><subject>Taxonomy</subject></subj-group></subj-group><subj-group subj-group-type="Discipline-v3"><subject>Computer and information sciences</subject><subj-group><subject>Data management</subject><subj-group><subject>Taxonomy</subject></subj-group></subj-group></subj-group><subj-group subj-group-type="Discipline-v3"><subject>Biology and life sciences</subject><subj-group><subject>Evolutionary biology</subject></subj-group></subj-group><subj-group subj-group-type="Discipline-v3"><subject>Biology and life sciences</subject><subj-group><subject>Evolutionary biology</subject><subj-group><subject>Evolutionary systematics</subject><subj-group><subject>Phylogenetics</subject></subj-group></subj-group></subj-group></subj-group><subj-group subj-group-type="Discipline-v3"><subject>Biology and life sciences</subject><subj-group><subject>Taxonomy</subject><subj-group><subject>Evolutionary systematics</subject><subj-group><subject>Phylogenetics</subject></subj-group></subj-group></subj-group></subj-group><subj-group subj-group-type="Discipline-v3"><subject>Computer and information sciences</subject><subj-group><subject>Data management</subject><subj-group><subject>Taxonomy</subject><subj-group><subject>Evolutionary systematics</subject><subj-group><subject>Phylogenetics</subject></subj-group></subj-group></subj-group></subj-group></subj-group><subj-group subj-group-type="Discipline-v3"><subject>Social sciences</subject><subj-group><subject>Sociology</subject><subj-group><subject>Communications</subject><subj-group><subject>Mass media</subject><subj-group><subject>Encyclopedias</subject><subj-group><subject>Online encyclopedias</subject></subj-group></subj-group></subj-group></subj-group></subj-group></subj-group><subj-group subj-group-type="Discipline-v3"><subject>Computer and information sciences</subject><subj-group><subject>Computing methods</subject></subj-group></subj-group><subj-group subj-group-type="Discipline-v3"><subject>Research and analysis methods</subject><subj-group><subject>Database and informatics methods</subject><subj-group><subject>Biological databases</subject><subj-group><subject>Genomic databases</subject></subj-group></subj-group></subj-group></subj-group><subj-group subj-group-type="Discipline-v3"><subject>Biology and life sciences</subject><subj-group><subject>Computational biology</subject><subj-group><subject>Genome analysis</subject><subj-group><subject>Genomic databases</subject></subj-group></subj-group></subj-group></subj-group><subj-group subj-group-type="Discipline-v3"><subject>Biology and life sciences</subject><subj-group><subject>Genetics</subject><subj-group><subject>Genomics</subject><subj-group><subject>Genome analysis</subject><subj-group><subject>Genomic databases</subject></subj-group></subj-group></subj-group></subj-group></subj-group><subj-group subj-group-type="Discipline-v3"><subject>Biology and life sciences</subject><subj-group><subject>Ecology</subject><subj-group><subject>Plant ecology</subject></subj-group></subj-group></subj-group><subj-group subj-group-type="Discipline-v3"><subject>Ecology and environmental sciences</subject><subj-group><subject>Ecology</subject><subj-group><subject>Plant ecology</subject></subj-group></subj-group></subj-group><subj-group subj-group-type="Discipline-v3"><subject>Biology and life sciences</subject><subj-group><subject>Plant science</subject><subj-group><subject>Plant ecology</subject></subj-group></subj-group></subj-group></article-categories>
<title-group>
<article-title>Lifemap: Exploring the Entire Tree of Life</article-title>
</title-group>
<contrib-group>
<contrib contrib-type="author" corresp="yes" xlink:type="simple">
<name name-style="western">
<surname>de Vienne</surname>
<given-names>Damien M.</given-names>
</name>
<xref ref-type="corresp" rid="cor001">*</xref>
<xref ref-type="aff" rid="aff001"/>
</contrib>
</contrib-group>
<aff id="aff001"><addr-line>Univ Lyon, Université Claude Bernard Lyon 1, CNRS, Laboratoire de Biométrie et Biologie Evolutive, UMR5558, Villeurbanne, Lyon, France</addr-line></aff>
<author-notes>
<fn fn-type="conflict" id="coi001">
<p>The authors have declared that no competing interests exist.</p>
</fn>
<corresp id="cor001">* E-mail: <email xlink:type="simple">damien.de-vienne@univ-lyon1.fr</email></corresp>
</author-notes>
<pub-date pub-type="epub">
<day>22</day>
<month>12</month>
<year>2016</year>
</pub-date>
<pub-date pub-type="collection">
<month>12</month>
<year>2016</year>
</pub-date>
<volume>14</volume>
<issue>12</issue>
<elocation-id>e2001624</elocation-id>
<permissions>
<copyright-year>2016</copyright-year>
<copyright-holder>Damien M. de Vienne</copyright-holder>
<license xlink:href="http://creativecommons.org/licenses/by/4.0/" xlink:type="simple">
<license-p>This is an open access article distributed under the terms of the <ext-link ext-link-type="uri" xlink:href="http://creativecommons.org/licenses/by/4.0/" xlink:type="simple">Creative Commons Attribution License</ext-link>, which permits unrestricted use, distribution, and reproduction in any medium, provided the original author and source are credited.</license-p>
</license>
</permissions>
<self-uri content-type="pdf" xlink:href="info:doi/10.1371/journal.pbio.2001624"/>
<abstract>
<p>The Tree of Life (ToL) is meant to be a unique representation of the evolutionary relationships between all species on earth. Huge efforts are made to assemble such a large tree, helped by the decrease of sequencing costs and improved methods to reconstruct and combine phylogenies, but no tool exists today to explore the ToL in its entirety in a satisfying manner. By combining methods used in modern cartography, such as OpenStreetMap, with a new way of representing tree-like structures, I created Lifemap, a tool allowing the exploration of a complete representation of the ToL (between 800,000 and 2.2 million species depending on the data source) in a zoomable interface. A server version of Lifemap also allows users to visualize their own trees. This should help researchers in ecology and evolutionary biology in their everyday work, but may also permit the diffusion to a broader audience of our current knowledge of the evolutionary relationships linking all organisms.</p>
</abstract>
<funding-group>
<funding-statement>Ancestrome project (grant number ANR-10-BINF- 01-01). The funder had no role in study design, data collection and analysis, decision to publish, or preparation of the manuscript.</funding-statement>
</funding-group>
<counts>
<fig-count count="4"/>
<table-count count="0"/>
<page-count count="8"/>
</counts>
</article-meta>
</front>
<body>
<sec id="sec001" sec-type="intro">
<title>Introduction</title>
<p>An exhaustive knowledge of the evolutionary relationships linking all organisms (the whole biodiversity) would produce a tree-like structure, referred to as the Tree of Life (ToL). The decrease of DNA sequencing costs [<xref ref-type="bibr" rid="pbio.2001624.ref001">1</xref>] associated with improved phylogenetic and phylogenomic methods for reconstructing phylogenetic trees [<xref ref-type="bibr" rid="pbio.2001624.ref002">2</xref>–<xref ref-type="bibr" rid="pbio.2001624.ref004">4</xref>] helped resolve, in the recent years, many parts of this ToL. The aggregation of these portions produces a phylogenetic classification scheme describing the evolutionary relationships among the species under consideration [<xref ref-type="bibr" rid="pbio.2001624.ref005">5</xref>]. The NCBI taxonomy is one of these classifications, describing relationships among ~1.4 million species (as of Oct 2016), that is widely used by biologists. Another version of the ToL, the Open Tree of Life (OTOL), was published recently [<xref ref-type="bibr" rid="pbio.2001624.ref006">6</xref>]. It adds to the taxonomy some evolutionary information retrieved from published phylogenetic trees, in order to provide a more accurate and more comprehensive description of the ToL. It currently contains around 2.2 million species.</p>
<p>Despite huge ongoing efforts to assemble the ToL [<xref ref-type="bibr" rid="pbio.2001624.ref006">6</xref>,<xref ref-type="bibr" rid="pbio.2001624.ref007">7</xref>], no tool exists today to explore it entirely and interactively in a satisfying manner. More generally, the visualization of very large trees still remains a challenge [<xref ref-type="bibr" rid="pbio.2001624.ref008">8</xref>]. A parallel has been drawn earlier between what has been achieved in cartography with the development of Google maps or OpenStreetMaps [<xref ref-type="bibr" rid="pbio.2001624.ref009">9</xref>] (OSM), and what could be done for exploring the ToL [<xref ref-type="bibr" rid="pbio.2001624.ref008">8</xref>,<xref ref-type="bibr" rid="pbio.2001624.ref010">10</xref>]. The logic behind the use of the cartographic paradigm for visualizing a taxonomy is straightforward: like geographic entities (countries, regions, cities, etc.), taxonomic levels have names (kingdoms, families, classes, orders, genera, etc.) and are nested within each other. Consequently, it is possible to propose a visualization where zooming in increases the level of detail displayed while hiding upper-level information. This idea was first exploited in a tool called OneZoom [<xref ref-type="bibr" rid="pbio.2001624.ref010">10</xref>] that allows visualizing, on demand, large trees by zooming and panning. This tool introduced the concept of deep zooming for visualizing large phylogenies (along with [<xref ref-type="bibr" rid="pbio.2001624.ref011">11</xref>]), which motivated other research along the same line, including the present one. The main limitation of OneZoom that makes it inappropriate for visualizing the complete ToL is that the fractal representation it uses prevents the presence of multifurcations in the trees (one node connected to more than two descendants), which is very common (83% of the nodes in the NCBI taxonomy and 72% in the OTOL are not binary).</p>
</sec>
<sec id="sec002">
<title>Three Versions of the Tree of Life</title>
<p>I developed Lifemap, a tool largely inspired by the technology developed for cartography that is free of the limitation described above. Its approach differs from that of OneZoom [<xref ref-type="bibr" rid="pbio.2001624.ref010">10</xref>], both in the representation of the tree and in the way images are displayed and interacted with on the screen. This allows a fast and smooth exploration of the biggest tree ever proposed on a single page for exploration.</p>
<p>Lifemap uses a representation inspired by Treemaps, a method developed in the field of computer sciences in the early 90s for turning file system tree structures (directories in a computer) into a planar space-filling map [<xref ref-type="bibr" rid="pbio.2001624.ref012">12</xref>] for clearer visualization. In Treemaps, directories are represented by rectangles that are recursively split in as many subrectangles as there are subdirectories, leading to a fully-filled map. The size of the rectangles is proportional to the number of files in each directory. This approach cannot be directly used to visualize the ToL because it is incompatible with the representations of links between the nodes, which is important in an evolutionary context where branches represent time and must be visible. I, however, kept the idea of filling the map recursively, using a base shape whose size is proportional (but with a square root transformation) to the number of elements in it. In Lifemap, this base shape is a half-circle, and the way these half-circles are arranged within and between each other (<xref ref-type="fig" rid="pbio.2001624.g001">Fig 1</xref>) ensures that there is space to draw all the branches and guarantees that the branches never intersect (unlike other solutions, [<xref ref-type="bibr" rid="pbio.2001624.ref013">13</xref>]).</p>
<fig id="pbio.2001624.g001" position="float">
<object-id pub-id-type="doi">10.1371/journal.pbio.2001624.g001</object-id>
<label>Fig 1</label>
<caption>
<title>Three successive zoom levels in Lifemap illustrating the half-circle representation employed.</title>
<p>Each clade is represented by a half-circle whose size depends on the relative number of species in the clade as compared to its sister clades at a given level. Note that these proportions are not respected at the tree root where the three superkingdoms are arbitrarily given the same size. Computation of the size of each half-circle is based on the angle they are associated with (α and β on the first panel): if <italic>n</italic><sub><italic>A</italic></sub> and <italic>n</italic><sub><italic>B</italic></sub> are the number of species in clades A and B, respectively, the angles in degrees are computed as follows: <inline-formula id="pbio.2001624.e001"><alternatives><graphic id="pbio.2001624.e001g" mimetype="image" position="anchor" xlink:href="info:doi/10.1371/journal.pbio.2001624.e001" xlink:type="simple"/><mml:math display="inline" id="M1"><mml:mrow><mml:mi>α</mml:mi><mml:mo>=</mml:mo><mml:mn>180</mml:mn><mml:mo>×</mml:mo><mml:msqrt><mml:mrow><mml:msub><mml:mi>n</mml:mi><mml:mi>A</mml:mi></mml:msub></mml:mrow></mml:msqrt><mml:mo>/</mml:mo><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:msqrt><mml:mrow><mml:msub><mml:mi>n</mml:mi><mml:mi>A</mml:mi></mml:msub></mml:mrow></mml:msqrt><mml:mo>+</mml:mo><mml:msqrt><mml:mrow><mml:msub><mml:mi>n</mml:mi><mml:mi>B</mml:mi></mml:msub></mml:mrow></mml:msqrt></mml:mrow><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></alternatives></inline-formula> and <inline-formula id="pbio.2001624.e002"><alternatives><graphic id="pbio.2001624.e002g" mimetype="image" position="anchor" xlink:href="info:doi/10.1371/journal.pbio.2001624.e002" xlink:type="simple"/><mml:math display="inline" id="M2"><mml:mrow><mml:mi>β</mml:mi><mml:mo>=</mml:mo><mml:mn>180</mml:mn><mml:mo>×</mml:mo><mml:msqrt><mml:mrow><mml:msub><mml:mi>n</mml:mi><mml:mi>B</mml:mi></mml:msub></mml:mrow></mml:msqrt><mml:mo>/</mml:mo><mml:mrow><mml:mo>(</mml:mo><mml:mrow><mml:msqrt><mml:mrow><mml:msub><mml:mi>n</mml:mi><mml:mi>A</mml:mi></mml:msub></mml:mrow></mml:msqrt><mml:mo>+</mml:mo><mml:msqrt><mml:mrow><mml:msub><mml:mi>n</mml:mi><mml:mi>B</mml:mi></mml:msub></mml:mrow></mml:msqrt></mml:mrow><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></alternatives></inline-formula>. The square root reduces the difference in half-circle sizes between very small and very large groups. At every level, the half-circles (clades) are randomly distributed within their parental half-circle.</p>
</caption>
<graphic mimetype="image" position="float" xlink:href="info:doi/10.1371/journal.pbio.2001624.g001" xlink:type="simple"/>
</fig>
<p>Lifemap comes in three versions that differ by the tree that is displayed and the information that is associated with tips and nodes when clicking. The general public version (<xref ref-type="fig" rid="pbio.2001624.g002">Fig 2A</xref>) displays a reduced NCBI taxonomy obtained by removing nonidentified clades and all taxa below the species level. When clicking on nodes or tips, a short description and a picture are displayed (<xref ref-type="fig" rid="pbio.2001624.g002">Fig 2B</xref>). Pictures and text are obtained from Wikipedia. If no Wikipedia page exists or if a picture is lacking, the user can click on a link to contribute to Wikipedia for these specific taxa by creating a page, modifying the text, and/or adding a picture. Lifemap should thus help identify missing pages and improve the quality and quantity of pages dedicated to clades and species in Wikipedia.</p>
<fig id="pbio.2001624.g002" position="float">
<object-id pub-id-type="doi">10.1371/journal.pbio.2001624.g002</object-id>
<label>Fig 2</label>
<caption>
<title>Screenshots of the Lifemap tool.</title>
<p>(<bold>A</bold>) Example of the appearance of Lifemap when zooming to the primates order. (<bold>B</bold>) Example of information displayed in the general public version when clicking on a node. (<bold>C</bold>) Visualization of the path between two taxa. Lemur image credit: Mathias Appel, Flickr (<ext-link ext-link-type="uri" xlink:href="https://flic.kr/p/FKtBbU" xlink:type="simple">https://flic.kr/p/FKtBbU</ext-link>).</p>
</caption>
<graphic mimetype="image" position="float" xlink:href="info:doi/10.1371/journal.pbio.2001624.g002" xlink:type="simple"/>
</fig>
<p>The NCBI version, named “Lifemap NCBI,” displays the whole NCBI taxonomy and is updated every week. When clicking on a node, the user can (i) get additional information about the current taxa (taxid, number of species), (ii) reach the NCBI web page corresponding to the node, and (iii) download the corresponding subtree in parenthetic format for further analysis. In this version, the user can also add a layer to the tree to visualize at each node the number of fully sequenced genomes.</p>
<p>The third version is named “Lifemap OTOL.” It displays the latest OTOL synthetic tree and will be updated every time a new version is released. The information displayed when clicking on the nodes is similar to the one available in the two others: Wikipedia picture and description, taxonomy code, possibility to download the subtree in parenthetic format, and taxonomic sources of information for each node. Other information that can be displayed as layers on Lifemap will be added in the future in response to user's suggestions and requests in the different versions.</p>
<p>Finally, all three versions give the possibility to compute, visualize, and explore “paths” in the ToL (<xref ref-type="fig" rid="pbio.2001624.g002">Fig 2C</xref>). This is done either by choosing a source and a destination taxa or by clicking the “view full ancestry” button associated with each node. In the latter case, the destination is set as the root of the tree. The path is computed instantly and highlighted on the tree. The most recent common ancestor (MRCA) is indicated with a marker, and the list of taxa encountered in the route from the source to the destination is returned.</p>
</sec>
<sec id="sec003">
<title>A Virtual Machine for Exploring Any Tree</title>
<p>In addition to the three precomputed trees described above and available online, Lifemap comes as a virtual machine that can be downloaded and used to visualize any tree. A web page (<xref ref-type="fig" rid="pbio.2001624.g003">Fig 3</xref>) available from the browser once the virtual machine is running allows the user to upload a tree file (Step 1), perform all the necessary computations on the server (Step 2), and explore the tree (Step 3). On the exploration page, the user has access to a search bar that allows finding and zooming to any node or tip based on its name (<xref ref-type="fig" rid="pbio.2001624.g003">Fig 3</xref>).</p>
<fig id="pbio.2001624.g003" position="float">
<object-id pub-id-type="doi">10.1371/journal.pbio.2001624.g003</object-id>
<label>Fig 3</label>
<caption>
<title>Screenshots of the Lifemap server.</title>
<p>Visualizing a tree with the Lifemap server is a three-step process that is performed from the dedicated web page (top screen). Once the tree file has been uploaded and the computations have been performed, the tree can be explored (bottom screen). This last screenshot shows the appearance of Lifemap for a fully bifurcating tree with nodes automatically named (see text).</p>
</caption>
<graphic mimetype="image" position="float" xlink:href="info:doi/10.1371/journal.pbio.2001624.g003" xlink:type="simple"/>
</fig>
<p>Because Lifemap requires nodes to be named, and because this condition is not met for most trees, the server version of Lifemap automatically gives names to unnamed nodes. This is done by traversing the whole tree from tips to root and assigning each (unnamed) node the names of two of the direct descendants, separated by a “+” sign.</p>
</sec>
<sec id="sec004" sec-type="conclusions">
<title>Discussion</title>
<p>Lifemap should become a useful source of information for the general public interested in evolution and biodiversity, but also for education and research in various fields related to ecology, evolutionary biology, and genomics. In addition, the Lifemap virtual machine might help researchers manipulating very large trees to visualize their data. Lifemap is available online at <ext-link ext-link-type="uri" xlink:href="http://lifemap.univ-lyon1.fr" xlink:type="simple">http://lifemap.univ-lyon1.fr</ext-link>. The general public version is also available as a mobile app for Android phones and tablets on the Play Store (as “Lifemap—Tree of Life”), and will soon be available for iOS devices and Windows phones.</p>
</sec>
<sec id="sec005" sec-type="materials|methods">
<title>Materials and Methods</title>
<sec id="sec006">
<title>Pipeline</title>
<p>A pipeline was written in Python (v2.7) to perform all the actions to create Lifemap and keep it up-to-date. The pipeline uses the ETE 3 toolkit [<xref ref-type="bibr" rid="pbio.2001624.ref014">14</xref>] for tree operations (traversal) and NCBI interrogation. Here are the main steps:</p>
<list list-type="bullet">
<list-item><p>Retrieve NCBI taxonomy from the NCBI website (or OTOL taxonomy from the OTOL web site) and convert to Newick format.</p></list-item>
<list-item><p>Only for the general public version: Remove all taxa whose name contains the words “unidentified,” “Unidentified,” “unclassified,” “Unclassified,” “environmental,” “Environmental,” “uncultured,” or “Uncultured,” and all taxa below the species level.</p></list-item>
<list-item><p>While traversing the tree:
<list list-type="bullet">
<list-item><p>Compute the coordinates of (i) nodes and tips, (ii) half-circles, (iii) half-circle centers where clade names are written at some zoom levels, (iv) rank names along the half-circles</p></list-item>
<list-item><p>Write all these coordinates in a postgreSQL database that has PostGIS enabled</p></list-item>
<list-item><p>Write information associated with each node and tip into the Solr Search Engine v5.4.0 (scientific name, common name, coordinates, zoom level, rank name, taxid).</p></list-item>
<list-item><p>Get additional information for each taxa (for now, the number of genomes fully sequenced), and write this information into Solr.</p></list-item>
</list></p></list-item>
</list>
<p>All Lifemap functions are freely available (Under the GNU General Public License) on GitHub at <ext-link ext-link-type="uri" xlink:href="https://github.com/damiendevienne/Lifemap/" xlink:type="simple">https://github.com/damiendevienne/Lifemap/</ext-link>, along with detailed descriptions of the functions, the configuration files, the requirements, etc. Readers are referred to this source of information for more details.</p>
</sec>
<sec id="sec007">
<title>NCBI and OTOL data</title>
<p>The NCBI taxonomy data is retrieved from the NCBI ftp site (<ext-link ext-link-type="uri" xlink:href="ftp://ftp.ncbi.nlm.nih.gov/pub/taxonomy/" xlink:type="simple">ftp://ftp.ncbi.nlm.nih.gov/pub/taxonomy/</ext-link>) every time the tree is updated. This is done automatically by the ETE 3 toolkit [<xref ref-type="bibr" rid="pbio.2001624.ref014">14</xref>] used in the pipeline described above. For the Lifemap OTOL version, the latest OTOL synthetic tree is downloaded from <ext-link ext-link-type="uri" xlink:href="https://tree.opentreeoflife.org/about/synthesis-release/" xlink:type="simple">https://tree.opentreeoflife.org/about/synthesis-release/</ext-link>, and the associated taxonomy version is retrieved from <ext-link ext-link-type="uri" xlink:href="https://tree.opentreeoflife.org/about/taxonomy-version/" xlink:type="simple">https://tree.opentreeoflife.org/about/taxonomy-version/</ext-link>. Currently, the synthetic tree version 7.0 is used, along with the taxonomy version 2.10.</p>
</sec>
<sec id="sec008">
<title>Tiling and image production</title>
<p>The zooming capability of the tool relies on the same principle and the same tools as OSM. The whole space is cut into square images (tiles) of 256 x 256 px and to each image at zoom <italic>n</italic> corresponds four images at zoom <italic>n</italic> + 1 (<xref ref-type="fig" rid="pbio.2001624.g004">Fig 4</xref>). Images are generated when first requested by a user, thanks to the <italic>mod_tile</italic> open source apache module linked to the <italic>renderd</italic> tool (both part of the OSM suite of tools [<xref ref-type="bibr" rid="pbio.2001624.ref015">15</xref>]) and cached on the server for further accession. The creation of the images is performed by <italic>mapnik</italic> v3.0.9 [<xref ref-type="bibr" rid="pbio.2001624.ref016">16</xref>], which reads the database, formats the graphical elements with respect to a style sheet written for Lifemap, and returns the images to the server.</p>
<fig id="pbio.2001624.g004" position="float">
<object-id pub-id-type="doi">10.1371/journal.pbio.2001624.g004</object-id>
<label>Fig 4</label>
<caption>
<title>Principle of the tiling system used in Lifemap.</title>
<p>Like in OSM, the image displayed at a given zoom level is composed of paving (or tiling) of small square images. To each of these square images at a given zoom level corresponds four images of the same size at the next level.</p>
</caption>
<graphic mimetype="image" position="float" xlink:href="info:doi/10.1371/journal.pbio.2001624.g004" xlink:type="simple"/>
</fig>
<p>Note that the number of images is expected to grow exponentially. The level zero of Lifemap, where all three superkingdoms are visible, is formed by four images. Level one requires 16 images (4<sup>2</sup>), level two requires 64 images (4<sup>3</sup>), …, level <italic>n</italic> requires 4<sup><italic>n</italic>+1</sup> images (<xref ref-type="fig" rid="pbio.2001624.g004">Fig 4</xref>). The number of zoom levels required to go to the deepest species in Lifemap-OTOL in its current version is 52, so if all images were generated at all zoom levels, the number of images would be around 1.1 x 10<sup>32</sup> (Σ4<sup><italic>i</italic></sup> for <italic>i</italic> in (1:53)), which is too big to be stored. However, the vast majority of these images are entirely black and are simply not generated, because images are generated on user's demand only, which solves the issue. The size of our servers is sufficient for all the images that are not entirely black to be generated and stored (estimated to be around 200Go for the different versions of Lifemap).</p>
</sec>
<sec id="sec009">
<title>Map–browser interaction and mobile version</title>
<p>The websites on which Lifemap can be explored were written in HTML5, CSS, and Javascript, using the Leaflet v0.7 javascript library [<xref ref-type="bibr" rid="pbio.2001624.ref017">17</xref>]. A mobile version of the tool was also written. The user is automatically redirected to this website if accessing Lifemap from a phone.</p>
<p>The creation of the mobile app was performed using PhoneGap [<xref ref-type="bibr" rid="pbio.2001624.ref018">18</xref>], a tool that allows encapsulating an HTML5/CSS/Javascript website and all its dependencies into a fully featured mobile application that can be uploaded to Android, Apple, or Microsoft stores.</p>
</sec>
</sec>
</body>
<back>
<ack>
<p>I thank Stéphane Delmotte and Bruno Spataro for help in the Lifemap servers preparation and the creation of the virtual machine, and all the members of the Laboratory of Biometry and Evolutionary Biology (LBBE, Lyon) for agreeing to beta-test the tool. Thanks also to Manolo Gouy, Laurent Duret, and Dominique de Vienne for insightful discussions and corrections to the first version of this text.</p>
</ack>
<fn-group>
<fn fn-type="other" id="fn001">
<p><bold>Provenance:</bold> Not commissioned; externally peer reviewed.</p>
</fn>
</fn-group>
<glossary>
<title>Abbreviations</title>
<def-list>
<def-item><term>MRCA</term>
<def><p>most recent common ancestor</p></def>
</def-item>
<def-item><term>OSM</term>
<def><p>OpenStreetMaps</p></def>
</def-item>
<def-item><term>OTOL</term>
<def><p>Open Tree of Life</p></def>
</def-item>
<def-item><term>ToL</term>
<def><p>Tree of Life</p></def>
</def-item>
</def-list>
</glossary>
<ref-list>
<title>References</title>
<ref id="pbio.2001624.ref001"><label>1</label><mixed-citation publication-type="other" xlink:type="simple">NHGRI Genome Sequencing Program (GSP). <ext-link ext-link-type="uri" xlink:href="https://www.genome.gov/27541954/dna-sequencing-costs/" xlink:type="simple">https://www.genome.gov/27541954/dna-sequencing-costs/</ext-link></mixed-citation></ref>
<ref id="pbio.2001624.ref002"><label>2</label><mixed-citation publication-type="journal" xlink:type="simple"><name name-style="western"><surname>Guindon</surname> <given-names>S</given-names></name>, <name name-style="western"><surname>Gascuel</surname> <given-names>O</given-names></name>. <article-title>A simple, fast, and accurate algorithm to estimate large phylogenies by maximum likelihood</article-title>. <source>Syst Biol</source>. <year>2003</year>; <volume>52</volume>: <fpage>696</fpage>–<lpage>704</lpage>. <object-id pub-id-type="pmid">14530136</object-id></mixed-citation></ref>
<ref id="pbio.2001624.ref003"><label>3</label><mixed-citation publication-type="journal" xlink:type="simple"><name name-style="western"><surname>Stamatakis</surname> <given-names>A</given-names></name>. <article-title>RAxML-VI-HPC: maximum likelihood-based phylogenetic analyses with thousands of taxa and mixed models</article-title>. <source>Bioinformatics</source>. <year>2006</year>; <volume>22</volume>: <fpage>2688</fpage>–<lpage>2690</lpage>. <comment>doi: <ext-link ext-link-type="uri" xlink:href="http://dx.doi.org/10.1093/bioinformatics/btl446" xlink:type="simple">10.1093/bioinformatics/btl446</ext-link></comment> <object-id pub-id-type="pmid">16928733</object-id></mixed-citation></ref>
<ref id="pbio.2001624.ref004"><label>4</label><mixed-citation publication-type="journal" xlink:type="simple"><name name-style="western"><surname>Ronquist</surname> <given-names>F</given-names></name>, <name name-style="western"><surname>Huelsenbeck</surname> <given-names>J</given-names></name>. <article-title>MrBayes 3: Bayesian phylogenetic inference under mixed models</article-title>. <year>2003</year>; <source>Bioinformatics</source>. <volume>19</volume>: <fpage>1572</fpage>–<lpage>1574</lpage>. <object-id pub-id-type="pmid">12912839</object-id></mixed-citation></ref>
<ref id="pbio.2001624.ref005"><label>5</label><mixed-citation publication-type="book" xlink:type="simple"><name name-style="western"><surname>Federhen</surname> <given-names>S</given-names></name>. <chapter-title>The Taxonomy Project</chapter-title>. In: <name name-style="western"><surname>McEntyre</surname> <given-names>J</given-names></name>, <name name-style="western"><surname>Ostell</surname> <given-names>J</given-names></name>, editors. <source>The NCBI Handbook (internet)</source>. <publisher-loc>Bethesda (MD)</publisher-loc>: <publisher-name>National Center for Biotechnology Information (US)</publisher-name>; <year>2002</year>.</mixed-citation></ref>
<ref id="pbio.2001624.ref006"><label>6</label><mixed-citation publication-type="journal" xlink:type="simple"><name name-style="western"><surname>Hinchliff</surname> <given-names>CE</given-names></name>, <name name-style="western"><surname>Smith</surname> <given-names>SA</given-names></name>, <name name-style="western"><surname>Allman</surname> <given-names>JF</given-names></name>, <name name-style="western"><surname>Burleigh</surname> <given-names>JG</given-names></name>, <name name-style="western"><surname>Chaudhary</surname> <given-names>R</given-names></name>, <etal>et al</etal>. <article-title>Synthesis of phylogeny and taxonomy into a comprehensive tree of life</article-title>. <source>PNAS</source>. <year>2015</year>; <volume>112</volume>: <fpage>12764</fpage>–<lpage>12769</lpage>. <comment>doi: <ext-link ext-link-type="uri" xlink:href="http://dx.doi.org/10.1073/pnas.1423041112" xlink:type="simple">10.1073/pnas.1423041112</ext-link></comment> <object-id pub-id-type="pmid">26385966</object-id></mixed-citation></ref>
<ref id="pbio.2001624.ref007"><label>7</label><mixed-citation publication-type="journal" xlink:type="simple"><name name-style="western"><surname>Hug</surname> <given-names>LA</given-names></name>, <name name-style="western"><surname>Baker</surname> <given-names>BJ</given-names></name>, <name name-style="western"><surname>Anantharaman</surname> <given-names>K</given-names></name>, <name name-style="western"><surname>Brown</surname> <given-names>CT</given-names></name>, <name name-style="western"><surname>Probst</surname> <given-names>AJ</given-names></name>, <etal>et al</etal>. <article-title>A new view of the tree of life</article-title>. <source>Nat. Microbiol</source>. <year>2016</year>; <volume>1</volume>: <fpage>16048</fpage>. <comment>doi: <ext-link ext-link-type="uri" xlink:href="http://dx.doi.org/10.1038/nmicrobiol.2016.48" xlink:type="simple">10.1038/nmicrobiol.2016.48</ext-link></comment> <object-id pub-id-type="pmid">27572647</object-id></mixed-citation></ref>
<ref id="pbio.2001624.ref008"><label>8</label><mixed-citation publication-type="journal" xlink:type="simple"><name name-style="western"><surname>Page</surname> <given-names>RDM</given-names></name>. <article-title>Space, time, form: viewing the Tree of Life</article-title>. <source>Trends Ecol Evol</source>. <year>2012</year>; <volume>27</volume>: <fpage>113</fpage>–<lpage>120</lpage>. <comment>doi: <ext-link ext-link-type="uri" xlink:href="http://dx.doi.org/10.1016/j.tree.2011.12.002" xlink:type="simple">10.1016/j.tree.2011.12.002</ext-link></comment> <object-id pub-id-type="pmid">22209094</object-id></mixed-citation></ref>
<ref id="pbio.2001624.ref009"><label>9</label><mixed-citation publication-type="journal" xlink:type="simple"><name name-style="western"><surname>Haklay</surname> <given-names>M</given-names></name>, <name name-style="western"><surname>Weber</surname> <given-names>P</given-names></name>. <article-title>OpenStreetMap: User-Generated Street Maps</article-title>. <source>IEEE Pervas. Comp</source>. <year>2008</year>; <volume>7</volume>: <fpage>12</fpage>–<lpage>18</lpage>.</mixed-citation></ref>
<ref id="pbio.2001624.ref010"><label>10</label><mixed-citation publication-type="journal" xlink:type="simple"><name name-style="western"><surname>Rosindell</surname> <given-names>J</given-names></name>, <name name-style="western"><surname>Harmon</surname> <given-names>LJ</given-names></name>. <article-title>OneZoom: A Fractal Explorer for the Tree of Life</article-title>. <source>PLoS Biol</source>. <year>2012</year>; <volume>10</volume>: <fpage>e1001406</fpage>. <comment>doi: <ext-link ext-link-type="uri" xlink:href="http://dx.doi.org/10.1371/journal.pbio.1001406" xlink:type="simple">10.1371/journal.pbio.1001406</ext-link></comment> <object-id pub-id-type="pmid">23091419</object-id></mixed-citation></ref>
<ref id="pbio.2001624.ref011"><label>11</label><mixed-citation publication-type="journal" xlink:type="simple"><name name-style="western"><surname>Block</surname> <given-names>F</given-names></name>, <name name-style="western"><surname>Horn</surname> <given-names>MS</given-names></name>, <name name-style="western"><surname>Phillips</surname> <given-names>BC</given-names></name>, <name name-style="western"><surname>Diamond</surname> <given-names>J</given-names></name>, <name name-style="western"><surname>Evans</surname> <given-names>EM</given-names></name> <etal>et al</etal>. <article-title>The DeepTree Exhibit: Visualizing the Tree of Life to Facilitate Informal Learning</article-title>. <source>IEEE Transactions on Visualization and Computer Graphics</source>. <year>2012</year>; <volume>18</volume>: <fpage>2789</fpage>–<lpage>2798</lpage>. <comment>doi: <ext-link ext-link-type="uri" xlink:href="http://dx.doi.org/10.1109/TVCG.2012.272" xlink:type="simple">10.1109/TVCG.2012.272</ext-link></comment> <object-id pub-id-type="pmid">26357188</object-id></mixed-citation></ref>
<ref id="pbio.2001624.ref012"><label>12</label><mixed-citation publication-type="journal" xlink:type="simple"><name name-style="western"><surname>Shneiderman</surname> <given-names>B</given-names></name>. <article-title>Tree visualization with tree-maps: 2-d space-filling approach</article-title>. <source>ACM Trans. Graph</source>. <year>1991</year>; <volume>11</volume>: <fpage>92</fpage>–<lpage>99</lpage>.</mixed-citation></ref>
<ref id="pbio.2001624.ref013"><label>13</label><mixed-citation publication-type="other" xlink:type="simple">Beck F, Burch M, Munz T, Di Silvestro L, Weiskopf D. Generalized Pythagoras Trees for Visualizing Hierarchies. Battiato et al. (Eds). 2015. Computer Vision, Imaging and Computer Graphics—Theory and Applications: International Joint Conference, VISIGRAPP 2014, Lisbon, Portugal, January 5–8, 2014. Springer International Publishing</mixed-citation></ref>
<ref id="pbio.2001624.ref014"><label>14</label><mixed-citation publication-type="journal" xlink:type="simple"><name name-style="western"><surname>Huerta-Cepas</surname> <given-names>J</given-names></name>, <name name-style="western"><surname>Serra</surname> <given-names>F</given-names></name>, <name name-style="western"><surname>Bork</surname> <given-names>P</given-names></name>. <article-title>ETE 3: Reconstruction, Analysis, and Visualization of Phylogenomic Data</article-title>. <source>Mol. Biol. Evol</source>. <year>2016</year>; <volume>33</volume>: <fpage>1635</fpage>–<lpage>1638</lpage>. <comment>doi: <ext-link ext-link-type="uri" xlink:href="http://dx.doi.org/10.1093/molbev/msw046" xlink:type="simple">10.1093/molbev/msw046</ext-link></comment> <object-id pub-id-type="pmid">26921390</object-id></mixed-citation></ref>
<ref id="pbio.2001624.ref015"><label>15</label><mixed-citation publication-type="other" xlink:type="simple">OpenStreetMap Team. <ext-link ext-link-type="uri" xlink:href="https://github.com/openstreetmap" xlink:type="simple">https://github.com/openstreetmap</ext-link> (accessed April 1st, 2016).</mixed-citation></ref>
<ref id="pbio.2001624.ref016"><label>16</label><mixed-citation publication-type="other" xlink:type="simple">Pavlenko A. Mapnik. <ext-link ext-link-type="uri" xlink:href="http://mapnik.org/" xlink:type="simple">http://mapnik.org/</ext-link>.</mixed-citation></ref>
<ref id="pbio.2001624.ref017"><label>17</label><mixed-citation publication-type="other" xlink:type="simple">Leaflet Team. Leaflet: an open-source JavaScript library for mobile-friendly interactive maps. <ext-link ext-link-type="uri" xlink:href="http://leafletjs.com/" xlink:type="simple">http://leafletjs.com/</ext-link>.</mixed-citation></ref>
<ref id="pbio.2001624.ref018"><label>18</label><mixed-citation publication-type="other" xlink:type="simple">PhoneGap Team. PhoneGap. <ext-link ext-link-type="uri" xlink:href="http://phonegap.com/" xlink:type="simple">http://phonegap.com/</ext-link>.</mixed-citation></ref>
</ref-list>
</back>
</article>